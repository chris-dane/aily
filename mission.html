<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carousel</title>
<style>
  body { margin:0; font-family:system-ui, sans-serif; background:#fff; }
  .wrap { max-width:900px; margin:0 auto; padding:16px; }
  .frame { position:relative; overflow:hidden; border:1px solid #e5e5e5; border-radius:12px; }
  .track { display:flex; transition:transform 240ms ease; }
  .slide { flex:0 0 100%; display:flex; align-items:center; justify-content:center; padding:12px; }
  canvas { width:100%; height:auto; display:block; }
  .ctrls { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:12px; }
  button { padding:10px 14px; border:1px solid #ddd; border-radius:10px; background:#fafafa; cursor:pointer; }
  button:disabled { opacity:.4; cursor:not-allowed; }
</style>

<div class="wrap">
  <div class="frame"><div id="track" class="track"></div></div>
  <div class="ctrls">
    <button id="prev">← Prev</button>
    <div id="status">0 / 0</div>
    <button id="next">Next →</button>
  </div>
</div>

<script type="module">
  import * as pdfjsLib from 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.mjs';
  // Tell PDF.js where to load the worker from
  pdfjsLib.GlobalWorkerOptions.workerSrc =
    'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.6.82/build/pdf.worker.mjs';

  const FILE_URL = './mission.pdf'; // ensure this file exists here
  const track = document.getElementById('track');
  const statusEl = document.getElementById('status');
  const btnPrev = document.getElementById('prev');
  const btnNext = document.getElementById('next');
  let pageCount = 0, idx = 0;

  const pdf = await pdfjsLib.getDocument(FILE_URL).promise;
  pageCount = pdf.numPages;

  for (let p = 1; p <= pageCount; p++) {
    const page = await pdf.getPage(p);
    const viewport = page.getViewport({ scale: 1.8 });
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d', { alpha:false });
    canvas.width = viewport.width;
    canvas.height = viewport.height;
    await page.render({ canvasContext: ctx, viewport }).promise;

    const slide = document.createElement('div');
    slide.className = 'slide';
    slide.appendChild(canvas);
    track.appendChild(slide);
  }

  function update() {
    track.style.transform = `translateX(${-idx * 100}%)`;
    statusEl.textContent = `${idx + 1} / ${pageCount}`;
    btnPrev.disabled = idx === 0;
    btnNext.disabled = idx >= pageCount - 1;
  }
  btnPrev.onclick = () => { if (idx > 0) { idx--; update(); } };
  btnNext.onclick = () => { if (idx < pageCount - 1) { idx++; update(); } };
  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowRight') btnNext.click();
    if (e.key === 'ArrowLeft') btnPrev.click();
  });
  update();
</script>
</html>
